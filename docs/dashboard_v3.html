<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Market Dashboard V3 - Premium</title>
<script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--primary:#3b82f6;--primary-light:#60a5fa;--primary-dark:#2563eb;
--success:#10b981;--danger:#ef4444;--warning:#f59e0b;--info:#06b6d4;
--purple:#8b5cf6;--indigo:#6366f1;
--lg-radius-card:20px;--lg-blur:8px;
--lg-glass-surface:rgba(255,255,255,0.55);--lg-glass-surface-2:rgba(255,255,255,0.82);
--lg-glass-border:rgba(15,23,42,0.08);--lg-glass-shadow:0 20px 70px rgba(2,6,23,0.12);
--lg-surface-glass:var(--lg-glass-surface);--lg-surface-semi:var(--lg-glass-surface-2);
--lg-surface-solid:#fff;--lg-surface-ghost:rgba(15,23,42,0.03);
--overlay-scrim:rgba(15,23,42,0.45);--text-on-accent:#fff;
--bg-dark:#f1f5f9;--bg-card:var(--lg-glass-surface-2);--bg-hover:rgba(15,23,42,0.05);
--text-primary:#0f172a;--text-secondary:#334155;--border-color:var(--lg-glass-border);
--shadow-sm:0 1px 2px rgba(2,6,23,0.08);--shadow-md:0 8px 24px rgba(2,6,23,0.10);
--shadow-lg:0 18px 60px rgba(2,6,23,0.12);
--glass-bg:var(--lg-glass-surface);--glass-border:var(--lg-glass-border);--glass-shadow:var(--lg-glass-shadow);
--gradient-blue:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
--gradient-green:linear-gradient(135deg,#11998e 0%,#38ef7d 100%);
--gradient-red:linear-gradient(135deg,#eb3349 0%,#f45c43 100%);
--gradient-purple:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
--gradient-glass:linear-gradient(180deg,rgba(255,255,255,0.16) 0%,rgba(255,255,255,0.06) 100%);
--chart-up:rgba(16,185,129,0.95);--chart-down:rgba(239,68,68,0.95);
--chart-up-soft:rgba(16,185,129,0.45);--chart-down-soft:rgba(239,68,68,0.45);
--chart-wick:rgba(15,23,42,0.35);
--motion-fast:120ms;--motion-med:180ms;--motion-slow:260ms;
--motion-ease:cubic-bezier(0.2,0.8,0.2,1);
}
[data-theme="dark"]{
--lg-glass-surface:rgba(2,6,23,0.38);--lg-glass-surface-2:rgba(2,6,23,0.62);
--lg-glass-border:rgba(226,232,240,0.14);--lg-glass-shadow:0 24px 90px rgba(0,0,0,0.50);
--lg-surface-glass:var(--lg-glass-surface);--lg-surface-semi:var(--lg-glass-surface-2);
--lg-surface-solid:var(--bg-dark);--lg-surface-ghost:rgba(255,255,255,0.03);
--overlay-scrim:rgba(0,0,0,0.55);
--bg-dark:#070b17;--bg-card:var(--lg-glass-surface-2);--bg-hover:rgba(148,163,184,0.12);
--text-primary:#f8fafc;--text-secondary:#b6c2d2;--border-color:var(--lg-glass-border);
--shadow-sm:0 1px 2px rgba(0,0,0,0.35);--shadow-md:0 10px 30px rgba(0,0,0,0.45);
--shadow-lg:0 24px 90px rgba(0,0,0,0.50);
--glass-bg:var(--lg-glass-surface);--glass-border:var(--lg-glass-border);--glass-shadow:var(--lg-glass-shadow);
--chart-wick:rgba(226,232,240,0.55);
}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg-dark);color:var(--text-primary);line-height:1.6;overflow-x:hidden;transition:background-color var(--motion-slow) var(--motion-ease),color var(--motion-slow) var(--motion-ease)}
body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:var(--gradient-blue);opacity:0.05;z-index:-1}
.dashboard{display:grid;grid-template-columns:240px 1fr 280px;min-height:100vh;gap:0}
.theme-toggle{position:fixed;top:20px;right:20px;z-index:1000;width:50px;height:50px;border-radius:var(--lg-radius-card);background:var(--lg-surface-glass);border:1px solid var(--lg-glass-border);backdrop-filter:blur(var(--lg-blur));box-shadow:var(--lg-glass-shadow);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.5rem;transition:all .3s}
.theme-toggle:hover{transform:scale(1.1) rotate(15deg)}
.sidebar,.section-nav{background:var(--lg-surface-glass);border:1px solid var(--lg-glass-border);border-radius:var(--lg-radius-card);backdrop-filter:blur(var(--lg-blur));padding:20px 0;overflow-y:auto;height:100vh;position:sticky;top:0;box-shadow:var(--lg-glass-shadow);transition:border-color var(--motion-slow) var(--motion-ease),box-shadow var(--motion-slow) var(--motion-ease),background-color var(--motion-slow) var(--motion-ease)}
.sidebar-header{padding:0 20px 20px;border-bottom:1px solid var(--border-color);margin-bottom:20px}
.sidebar-header h2{font-size:1.2rem;font-weight:700;background:var(--gradient-blue);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:5px}
.sidebar-header .date{font-size:.75rem;color:var(--text-secondary)}
.search-box{padding:0 20px 15px}
.search-input{width:100%;padding:10px 15px;background:var(--bg-hover);border:1px solid var(--border-color);border-radius:10px;color:var(--text-primary);font-size:.9rem;transition:all .3s}
.search-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px color-mix(in srgb,var(--primary) 22%,transparent)}
.index-list{padding:0 10px}
.index-item{padding:14px 16px;margin:4px 0;border-radius:var(--lg-radius-card);cursor:pointer;transition:all .3s;background:var(--lg-surface-semi);border:1px solid var(--lg-glass-border);box-shadow:0 6px 18px color-mix(in srgb,var(--primary-dark) 18%,transparent);font-weight:500;font-size:.9rem;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:space-between}
.index-item::before{content:'';position:absolute;left:0;top:0;width:3px;height:100%;background:var(--primary);transform:scaleY(0);transition:transform .3s}
.index-item:hover{background:color-mix(in srgb,var(--lg-surface-semi) 70%,var(--primary) 30%);border-color:color-mix(in srgb,var(--lg-glass-border) 55%,var(--primary-light) 45%);transform:translateX(4px)}
.index-item:hover::before{transform:scaleY(1)}
.index-item.active{background:linear-gradient(135deg,var(--primary-dark) 0%,var(--primary) 55%,var(--primary-light) 100%);border-color:var(--primary-light);color:var(--text-on-accent);box-shadow:0 14px 34px color-mix(in srgb,var(--primary) 34%,transparent);transform:translateX(4px)}
.index-item.active::before{transform:scaleY(1);background:var(--text-on-accent)}
.index-item .change-badge{font-size:.75rem;font-weight:700;padding:2px 8px;border-radius:8px;background:rgba(255,255,255,0.15)}
.index-item.active .change-badge{background:rgba(255,255,255,0.25)}
.section-nav-header{padding:0 20px 20px;border-bottom:1px solid var(--border-color);margin-bottom:20px}
.section-nav-header h3{font-size:1rem;font-weight:700;background:var(--gradient-purple);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:5px}
.section-nav-header .subtitle{font-size:.7rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}
.section-list{padding:0 10px}
.section-item{padding:12px 16px;margin:4px 0;border-radius:var(--lg-radius-card);cursor:pointer;transition:all .3s;background:var(--lg-surface-semi);border:1px solid var(--lg-glass-border);box-shadow:0 6px 18px color-mix(in srgb,var(--primary-dark) 18%,transparent);font-weight:500;font-size:.85rem;position:relative;overflow:hidden;display:flex;align-items:center;gap:10px}
.section-item .icon{font-size:1rem;flex-shrink:0}
.section-item .title{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.section-item::before{content:'';position:absolute;right:0;top:0;width:3px;height:100%;background:var(--primary);transform:scaleY(0);transition:transform .3s}
.section-item:hover{background:color-mix(in srgb,var(--lg-surface-semi) 70%,var(--primary) 30%);border-color:color-mix(in srgb,var(--lg-glass-border) 55%,var(--primary-light) 45%);transform:translateX(-4px)}
.section-item:hover::before{transform:scaleY(1)}
.section-item.active{background:linear-gradient(135deg,var(--primary-dark) 0%,var(--primary) 55%,var(--primary-light) 100%);border-color:var(--primary-light);color:var(--text-on-accent);box-shadow:0 14px 34px color-mix(in srgb,var(--primary) 34%,transparent);transform:translateX(-4px)}
.section-item.active::before{transform:scaleY(1);background:var(--text-on-accent)}
.no-sections{padding:40px 20px;text-align:center;color:var(--text-secondary);font-size:.9rem;font-style:italic}
.main-content{padding:30px;overflow-y:auto;height:100vh}
.page-header{margin-bottom:30px}
.page-header h1{font-size:2rem;font-weight:800;margin-bottom:10px;background:var(--gradient-blue);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.last-update{font-size:.85rem;color:var(--text-secondary)}
.metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;margin-bottom:30px}
.metric-card{background:var(--lg-surface-semi);border:1px solid var(--lg-glass-border);border-radius:var(--lg-radius-card);padding:24px;transition:all .4s;box-shadow:var(--lg-glass-shadow);position:relative;overflow:hidden}
.metric-card::before{content:'';position:absolute;top:0;left:0;width:100%;height:4px;background:var(--gradient-blue);transform:scaleX(0);transition:transform .4s}
.metric-card:hover{transform:translateY(-4px);box-shadow:0 16px 40px color-mix(in srgb,var(--primary) 25%,transparent)}
.metric-card:hover::before{transform:scaleX(1)}
.metric-card .label{font-size:.75rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px;margin-bottom:10px;font-weight:600}
.metric-card .value{font-size:2rem;font-weight:800;margin-bottom:8px;background:var(--gradient-blue);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.metric-card .change{font-size:.9rem;font-weight:600;padding:6px 12px;border-radius:8px;display:inline-block}
.metric-card .change.positive{background:color-mix(in srgb,var(--success) 20%,transparent);color:var(--success)}
.metric-card .change.negative{background:color-mix(in srgb,var(--danger) 20%,transparent);color:var(--danger)}
.section-card{background:var(--lg-surface-glass);border:1px solid var(--lg-glass-border);border-radius:var(--lg-radius-card);backdrop-filter:blur(var(--lg-blur));overflow:hidden;transition:all .4s;box-shadow:var(--lg-glass-shadow);margin-bottom:20px}
.section-card:hover{transform:translateY(-2px);box-shadow:0 16px 40px color-mix(in srgb,var(--primary) 20%,transparent)}
.section-header{padding:18px 24px;font-weight:800;font-size:1.05rem;display:flex;align-items:center;gap:10px;border-bottom:1px solid var(--glass-border);background:var(--gradient-glass)}
.section-body{padding:28px;background:var(--lg-surface-semi)}
.content-paragraph{color:var(--text-secondary);line-height:1.7;margin:12px 0;font-size:.95rem}
.conclusion-box{display:flex;align-items:center;gap:12px;padding:16px 20px;border-radius:12px;margin:16px 0;background:linear-gradient(135deg,color-mix(in srgb,var(--indigo) 18%,transparent) 0%,color-mix(in srgb,var(--purple) 14%,transparent) 100%);border:2px solid color-mix(in srgb,var(--indigo) 30%,transparent);border-left:6px solid var(--purple);box-shadow:0 4px 20px color-mix(in srgb,var(--purple) 22%,transparent);position:relative;overflow:hidden}
.conclusion-box .conclusion-icon{font-size:1.8rem;width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:12px;background:linear-gradient(135deg,var(--purple) 0%,var(--indigo) 100%);color:var(--text-on-accent);flex-shrink:0}
.conclusion-box .conclusion-text{font-size:1.05rem;font-weight:700;color:var(--primary);line-height:1.6}
.evidence-box{display:flex;align-items:center;gap:12px;padding:16px 20px;border-radius:12px;margin:16px 0;background:linear-gradient(135deg,color-mix(in srgb,var(--success) 12%,transparent) 0%,color-mix(in srgb,var(--success) 6%,transparent) 100%);border-left:5px solid var(--success)}
.evidence-box .evidence-icon{font-size:1.4rem;width:38px;height:38px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:linear-gradient(135deg,color-mix(in srgb,var(--success) 20%,transparent) 0%,color-mix(in srgb,var(--success) 10%,transparent) 100%);flex-shrink:0}
.evidence-box .evidence-text{font-weight:600;color:var(--success)}
.action-box{display:flex;align-items:center;gap:12px;padding:16px 20px;border-radius:12px;margin:16px 0;background:linear-gradient(135deg,color-mix(in srgb,var(--primary) 14%,transparent) 0%,color-mix(in srgb,var(--indigo) 10%,transparent) 100%);border-left:5px solid var(--primary)}
.action-box .action-icon{font-size:1.4rem;width:38px;height:38px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:linear-gradient(135deg,color-mix(in srgb,var(--primary) 22%,transparent) 0%,color-mix(in srgb,var(--indigo) 12%,transparent) 100%);flex-shrink:0}
.action-box .action-text{font-weight:650;color:var(--text-primary)}
.risk-box{display:flex;align-items:center;gap:12px;padding:16px 20px;border-radius:12px;margin:16px 0;background:linear-gradient(135deg,color-mix(in srgb,var(--danger) 14%,transparent) 0%,color-mix(in srgb,var(--warning) 8%,transparent) 100%);border-left:5px solid var(--danger)}
.risk-box .risk-icon{font-size:1.4rem;width:38px;height:38px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:linear-gradient(135deg,color-mix(in srgb,var(--danger) 22%,transparent) 0%,color-mix(in srgb,var(--warning) 12%,transparent) 100%);flex-shrink:0}
.risk-box .risk-text{font-weight:650;color:var(--danger)}
.metric-number{font-weight:900;color:var(--primary);font-size:1.05em}
.percentage{font-weight:800;padding:2px 6px;border-radius:6px;font-size:.9em}
.percentage.bullish{color:var(--success);background:color-mix(in srgb,var(--success) 15%,transparent)}
.percentage.bearish{color:var(--danger);background:color-mix(in srgb,var(--danger) 15%,transparent)}
.chip{display:inline-flex;align-items:center;justify-content:center;padding:4px 10px;border-radius:999px;font-weight:800;font-size:.85rem;border:1px solid var(--glass-border)}
.chip.positive{color:var(--success);background:color-mix(in srgb,var(--success) 15%,transparent)}
.chip.negative{color:var(--danger);background:color-mix(in srgb,var(--danger) 15%,transparent)}
.chip.neutral{color:var(--text-secondary);background:color-mix(in srgb,var(--text-secondary) 12%,transparent)}
.idx-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:12px}
.idx-card-btn{appearance:none;width:100%;display:block;text-align:left;cursor:pointer;color:inherit;transition:transform .2s,box-shadow .2s;border:1px solid var(--lg-glass-border);border-radius:var(--lg-radius-card);padding:10px;background:var(--lg-surface-semi);overflow:hidden}
.idx-card-btn:hover{transform:translateY(-1px);box-shadow:var(--shadow-md)}
.idx-top{display:flex;align-items:center;justify-content:space-between;gap:10px}
.idx-code{font-weight:900;letter-spacing:.4px;font-size:.95rem}
.heatmap-table{width:100%;border-collapse:separate;border-spacing:8px}
.heatmap-cell{border-radius:var(--lg-radius-card);padding:10px;border:1px solid var(--lg-glass-border);background:var(--lg-surface-semi)!important;text-align:center;position:relative;overflow:hidden;transition:transform .18s,box-shadow .18s}
.heatmap-cell:hover{transform:translateY(-1px);box-shadow:var(--shadow-md)}
.heatmap-cell-btn{appearance:none;display:block;width:100%;border:0;background:transparent;padding:0;color:inherit;cursor:pointer;position:relative}
.heatmap-symbol{font-weight:900;letter-spacing:.3px;color:var(--text-primary)}
.heatmap-metric{margin-top:4px;color:var(--text-secondary);font-size:.85rem;font-weight:700}
.heatmap-cell-btn[data-change-pct^="-"] .heatmap-metric{color:var(--danger)}
.heatmap-cell-btn:not([data-change-pct^="-"]):not([data-change-pct=""]):not([data-change-pct="0"]) .heatmap-metric{color:var(--success)}
.ohlcv-panel,.price-panel{margin-top:14px;border:1px solid var(--lg-glass-border);border-radius:var(--lg-radius-card);background:var(--lg-surface-semi);overflow:hidden;max-width:760px;margin-left:auto;margin-right:auto}
.ohlcv-toolbar,.price-toolbar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 14px;border-bottom:1px solid var(--glass-border);background:var(--gradient-glass)}
.ohlcv-toolbar .title,.price-toolbar .title{font-weight:900;letter-spacing:.2px}
.ohlcv-chart,.price-chart{width:100%;height:280px;border-radius:14px;background:var(--lg-surface-ghost);border:1px solid var(--lg-glass-border);position:relative;overflow:hidden}
.ohlcv-body,.price-body{padding:12px 14px 14px}
.ohlcv-meta{margin-top:10px;color:var(--text-secondary);font-size:.85rem;font-weight:800;display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}
.summary-table{width:100%;border-collapse:collapse}
.summary-table th,.summary-table td{padding:10px;border-bottom:1px solid var(--border-color);font-size:.92rem;text-align:left}
.summary-table th{color:var(--text-secondary);font-size:.78rem;text-transform:uppercase;letter-spacing:.6px}
.overview-extras{margin-top:18px;display:flex;flex-direction:column;gap:16px}
.overview-extras .block{background:var(--lg-surface-semi);border:1px solid var(--lg-glass-border);border-radius:var(--lg-radius-card);overflow:hidden;box-shadow:var(--lg-glass-shadow)}
.overview-extras .block-header{padding:14px 16px;font-weight:800;background:var(--gradient-glass);border-bottom:1px solid var(--glass-border)}
.overview-extras .block-body{padding:14px 16px}
.ui-modal{display:none;position:fixed;z-index:10001;left:0;top:0;width:100%;height:100%;background-color:var(--overlay-scrim);backdrop-filter:blur(var(--lg-blur))}
.ui-modal-content{background:var(--lg-surface-solid);margin:3% auto;padding:22px 18px;border-radius:var(--lg-radius-card);width:92%;max-width:820px;box-shadow:0 20px 60px rgba(2,6,23,0.18);position:relative;border:1px solid var(--lg-glass-border)}
.ui-close{position:absolute;right:14px;top:12px;width:36px;height:36px;border-radius:50%;background:var(--lg-surface-ghost);border:1px solid var(--glass-border);font-size:20px;font-weight:900;color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}
.ui-close:hover{background:color-mix(in srgb,var(--primary) 15%,transparent);color:var(--primary);transform:rotate(90deg)}
.ui-title{font-size:1.1rem;font-weight:900}
.ui-subtitle{margin-top:6px;color:var(--text-secondary);font-size:.92rem}
.ui-metrics{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;margin-bottom:14px}
.ui-metric{border:1px solid var(--glass-border);border-radius:14px;padding:12px;background:var(--lg-surface-ghost)}
.ui-metric .k{color:var(--text-secondary);font-size:.78rem;text-transform:uppercase;letter-spacing:.6px;font-weight:800}
.ui-metric .v{margin-top:8px;font-weight:900}
.loading-spinner{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;gap:16px}
.loading-spinner .spinner{width:40px;height:40px;border:4px solid var(--border-color);border-top-color:var(--primary);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.ip-disclaimer{margin-top:8px;padding:10px 12px;border-radius:14px;border:1px dashed var(--border-color);background:var(--bg-card);color:var(--text-secondary);font-size:.82rem;line-height:1.45}
.ip-disclaimer strong{color:var(--text-primary)}
.mobile-menu-fab{position:fixed;right:14px;bottom:14px;z-index:9000;display:none;align-items:center;justify-content:center;padding:12px 14px;border-radius:var(--lg-radius-card);background:var(--lg-surface-glass);border:1px solid var(--lg-glass-border);backdrop-filter:blur(var(--lg-blur));box-shadow:var(--shadow-md);color:var(--text-primary);font-weight:900;cursor:pointer}
@media(max-width:768px){
.dashboard{display:flex;flex-direction:column;gap:12px;padding:12px;min-height:auto}
.heatmap-table{display:none!important}
.mobile-menu-fab{display:inline-flex;bottom:84px}
.sidebar,.section-nav{display:block;position:relative;top:auto;height:auto;overflow:visible}
.sidebar{order:1;padding:14px 0}.section-nav{order:2;padding:14px 0}.main-content{order:3;height:auto;overflow:visible;padding:16px}
.index-list,#sectionList{max-height:52vh;overflow:auto}
.metrics-grid{grid-template-columns:repeat(2,1fr)}
.theme-toggle{width:45px;height:45px;font-size:1.3rem;top:12px;right:12px}
.ui-metrics{grid-template-columns:1fr}
body.mobile-reading .sidebar,body.mobile-reading .section-nav{display:none}
body.mobile-reading .main-content{order:1}
}
::-webkit-scrollbar{width:10px}
::-webkit-scrollbar-track{background:var(--bg-dark)}
::-webkit-scrollbar-thumb{background:var(--gradient-blue);border-radius:5px}
</style>
</head>
<body data-theme="light">
<button class="theme-toggle" id="themeToggle">&#x1F319;</button>
<div class="dashboard">
<!-- Sidebar Left: Index List -->
<div class="sidebar">
<div class="sidebar-header">
<h2>&#x1F4CA; Market Dashboard V3</h2>
<div class="date" id="reportDate">--</div>
<div class="ip-disclaimer">
<div><strong>VN Stock Sniper V2</strong></div>
<div>AI-powered analysis from Claude</div>
</div>
</div>
<div class="search-box">
<input type="text" class="search-input" placeholder="&#x1F50D; Tim chi so..." id="searchInput">
</div>
<div class="index-list" id="indexList"></div>
</div>
<!-- Main Content -->
<div class="main-content" id="mainContent">
<div class="page-header">
<h1 id="pageTitle">Market Dashboard V3</h1>
<div class="last-update" id="lastUpdate">Dang tai du lieu...</div>
</div>
<div id="metricsBar"></div>
<div id="singleSectionContent" style="display:none;"></div>
<div id="emptyState" style="text-align:center;padding:100px 20px;">
<div style="font-size:4rem;margin-bottom:20px;">&#x1F4C8;</div>
<h2 style="color:var(--text-secondary);margin-bottom:10px;">Dang tai du lieu...</h2>
<div class="loading-spinner"><div class="spinner"></div><div style="color:var(--text-secondary)">Loading...</div></div>
</div>
</div>
<!-- Sidebar Right: Section Navigation -->
<div class="section-nav">
<div class="section-nav-header">
<h3 id="sectionNavTitle">Muc phan tich</h3>
<div class="subtitle">SECTIONS</div>
</div>
<div class="section-list" id="sectionList">
<div class="no-sections">Chon chi so de xem</div>
</div>
</div>
</div>
<button type="button" id="mobileMenuFab" class="mobile-menu-fab">&#x2630; Menu</button>
<!-- UI Modal -->
<div id="uiModal" class="ui-modal">
<div class="ui-modal-content">
<button class="ui-close" onclick="closeUiModal()">&#215;</button>
<div class="ui-title" id="uiModalTitle"></div>
<div class="ui-subtitle" id="uiModalSubtitle"></div>
<div id="uiModalBody"></div>
</div>
</div>

<!-- Load pre-generated data from Python -->
<script src="v3_data.js"></script>

<script>
// ============================================================
// DASHBOARD V3 - DATA LAYER
// ============================================================

// Check if pre-generated data exists
const HAS_DATA = typeof FULL_DATA !== 'undefined';
const HAS_OHLCV = typeof UI_GLM_INDEX_OHLCV !== 'undefined';
const HAS_HEATMAP = typeof UI_GLM_VNINDEX_HEATMAP !== 'undefined';
const HAS_META = typeof UI_GLM_REPORT_META !== 'undefined';

// Index list: overview + 4 indices
const INDEX_KEYS = ['overview','vnindex','vn30','vn100','vnmidcap'];
const INDEX_NAMES = {
  overview: 'TONG HOP',
  vnindex: 'VNINDEX',
  vn30: 'VN30',
  vn100: 'VN100',
  vnmidcap: 'VNMIDCAP',
};

// Extra chart sections appended after AI sections
const EXTRA_SECTIONS_INDEX = [
  {title: 'BIEU DO NEN & KHOI LUONG', icon: '\u{1F4CA}', type: 'chart_candle'},
  {title: 'BIEU DO XU HUONG', icon: '\u{1F4C8}', type: 'chart_line'},
];
const EXTRA_SECTIONS_OVERVIEW = [
  {title: 'THONG KE CAC CHI SO', icon: '\u{1F4CA}', type: 'index_cards'},
  {title: 'HEATMAP VN30', icon: '\u{1F525}', type: 'heatmap'},
];

let currentIndex = null;
let currentSectionIdx = null;

// ---- Helpers ----
function escapeHtml(t) { return String(t==null?'':t).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
function fmtNum(n, d=2) { if (n==null||!isFinite(n)) return 'N/A'; return n.toLocaleString(undefined,{maximumFractionDigits:d}); }
function fmtCompact(n) { if (n==null||!isFinite(n)) return 'N/A'; const a=Math.abs(n); if(a>=1e9) return (n/1e9).toFixed(1)+'B'; if(a>=1e6) return (n/1e6).toFixed(1)+'M'; if(a>=1e3) return (n/1e3).toFixed(1)+'K'; return String(Math.round(n)); }
function isDark() { return document.body.getAttribute('data-theme')==='dark'; }
function cssVar(name, fallback='') { try{return getComputedStyle(document.body).getPropertyValue(name).trim()||fallback;}catch(_){return fallback;} }

function getOhlcvData(key) {
  if (!HAS_OHLCV) return null;
  return UI_GLM_INDEX_OHLCV.indices?.[key] || null;
}

function getChangePct(key) {
  const d = getOhlcvData(key);
  if (!d || !d.bars || d.bars.length < 2) return null;
  const last = d.bars[d.bars.length-1];
  const prev = d.bars[d.bars.length-2];
  if (!prev.c) return null;
  return ((last.c - prev.c) / prev.c) * 100;
}

function getTone(pct) { if (pct==null) return 'neutral'; return pct>0?'positive':(pct<0?'negative':'neutral'); }

// ---- Get all sections for an index (AI + extra) ----
function getAllSections(key) {
  const sections = [];
  // AI sections from FULL_DATA
  if (HAS_DATA && FULL_DATA[key] && FULL_DATA[key].sections) {
    FULL_DATA[key].sections.forEach(s => {
      sections.push({title: s.title, icon: s.icon || '', content: s.content, type: 'ai'});
    });
  }
  // Extra chart/special sections
  if (key === 'overview') {
    EXTRA_SECTIONS_OVERVIEW.forEach(s => sections.push(s));
  } else {
    EXTRA_SECTIONS_INDEX.forEach(s => sections.push(s));
  }
  return sections;
}

// ---- Theme ----
const themeToggle = document.getElementById('themeToggle');
let currentTheme = localStorage.getItem('theme') || 'light';
document.body.setAttribute('data-theme', currentTheme);
themeToggle.textContent = currentTheme==='light'?'\u{1F319}':'\u{2600}';
themeToggle.addEventListener('click', () => {
  currentTheme = currentTheme==='light'?'dark':'light';
  document.body.setAttribute('data-theme', currentTheme);
  localStorage.setItem('theme', currentTheme);
  themeToggle.textContent = currentTheme==='light'?'\u{1F319}':'\u{2600}';
  if (currentIndex && currentSectionIdx!=null) selectSection(currentSectionIdx);
});

// ---- Mobile menu ----
document.getElementById('mobileMenuFab')?.addEventListener('click', () => {
  document.body.classList.remove('mobile-reading');
  closeUiModal();
});

// ---- Modal ----
function openUiModal({title='', subtitle='', bodyHtml=''}={}) {
  document.getElementById('uiModalTitle').textContent = title;
  document.getElementById('uiModalSubtitle').textContent = subtitle;
  document.getElementById('uiModalBody').innerHTML = bodyHtml;
  document.getElementById('uiModal').style.display = 'block';
  document.body.style.overflow = 'hidden';
}
function closeUiModal() {
  document.getElementById('uiModal').style.display = 'none';
  document.getElementById('uiModalBody').innerHTML = '';
  document.body.style.overflow = 'auto';
}
window.addEventListener('click', e => { if (e.target===document.getElementById('uiModal')) closeUiModal(); });
document.addEventListener('keydown', e => { if (e.key==='Escape') closeUiModal(); });

// ---- Render Sidebar ----
function renderSidebar() {
  const c = document.getElementById('indexList');
  c.innerHTML = INDEX_KEYS.map(key => {
    const pct = key!=='overview' ? getChangePct(key) : null;
    const badge = pct!=null ? `<span class="change-badge" style="color:${pct>=0?'var(--success)':'var(--danger)'}">${pct>=0?'+':''}${pct.toFixed(2)}%</span>` : '';
    return `<div class="index-item" onclick="selectIndex('${key}')" data-index="${key}">
      <span class="name">${escapeHtml(INDEX_NAMES[key])}</span>
      ${badge}
    </div>`;
  }).join('');
}

// ---- Search ----
document.getElementById('searchInput').addEventListener('input', function(e) {
  const q = e.target.value.toLowerCase();
  document.querySelectorAll('.index-item').forEach(it => {
    it.style.display = it.querySelector('.name').textContent.toLowerCase().includes(q)?'flex':'none';
  });
});

// ---- Render Section List ----
function renderSectionList(key) {
  const sections = getAllSections(key);
  const c = document.getElementById('sectionList');
  document.getElementById('sectionNavTitle').textContent = INDEX_NAMES[key] || key.toUpperCase();
  if (!sections.length) {
    c.innerHTML = '<div class="no-sections">Khong co du lieu</div>';
    return;
  }
  c.innerHTML = sections.map((s,i) => `
    <div class="section-item" onclick="selectSection(${i})" data-section="${i}">
      <span class="icon">${s.icon}</span>
      <span class="title">${escapeHtml(s.title)}</span>
    </div>
  `).join('');
}

// ---- Metrics Bar ----
function renderMetricsBar(key) {
  const el = document.getElementById('metricsBar');
  if (key === 'overview') {
    // Show all indices summary
    const keys = INDEX_KEYS.filter(k=>k!=='overview');
    el.innerHTML = '<div class="metrics-grid">' + keys.map(k => {
      const d = getOhlcvData(k);
      if (!d || !d.bars.length) return '';
      const last = d.bars[d.bars.length-1];
      const pct = getChangePct(k);
      const tone = getTone(pct);
      return `<div class="metric-card">
        <div class="label">${escapeHtml(INDEX_NAMES[k])}</div>
        <div class="value">${fmtNum(last.c,2)}</div>
        <div class="change ${tone}">${pct!=null?((pct>=0?'+':'')+pct.toFixed(2)+'%'):'N/A'}</div>
      </div>`;
    }).join('') + '</div>';
  } else {
    const d = getOhlcvData(key);
    if (!d || !d.bars.length) { el.innerHTML = ''; return; }
    const last = d.bars[d.bars.length-1];
    const pct = getChangePct(key);
    const tone = getTone(pct);
    el.innerHTML = `<div class="metrics-grid">
      <div class="metric-card"><div class="label">Gia hien tai</div><div class="value">${fmtNum(last.c,2)}</div><div class="change ${tone}">${pct!=null?((pct>=0?'+':'')+pct.toFixed(2)+'%'):'N/A'}</div></div>
      <div class="metric-card"><div class="label">Khoi luong</div><div class="value">${fmtCompact(last.v)}</div></div>
      <div class="metric-card"><div class="label">High / Low</div><div class="value" style="font-size:1.2rem">${fmtNum(last.h,2)} / ${fmtNum(last.l,2)}</div></div>
    </div>`;
  }
}

// ---- Select Index ----
function selectIndex(key) {
  currentIndex = key;
  currentSectionIdx = null;
  document.body.classList.remove('mobile-reading');
  document.querySelectorAll('.index-item').forEach(it=>it.classList.remove('active'));
  const el = document.querySelector(`[data-index="${key}"]`);
  if (el) el.classList.add('active');
  renderSectionList(key);
  renderMetricsBar(key);

  const title = HAS_DATA && FULL_DATA[key] ? FULL_DATA[key].title : (INDEX_NAMES[key] || key);
  document.getElementById('pageTitle').textContent = title;
  document.getElementById('emptyState').style.display = 'block';
  document.getElementById('singleSectionContent').style.display = 'none';
  document.getElementById('emptyState').innerHTML = `
    <div style="font-size:3rem;margin-bottom:20px;">\u{1F449}</div>
    <h2 style="color:var(--text-secondary);margin-bottom:10px;">Chon muc phan tich ben phai</h2>
    <p style="color:var(--text-secondary);font-size:.9rem;">Click vao cac section o cot phai de xem noi dung phan tich AI</p>
  `;

  if (window.matchMedia('(max-width:768px)').matches) {
    document.querySelector('.section-nav')?.scrollIntoView({behavior:'smooth'});
  }
}

// ---- Select Section ----
function selectSection(idx) {
  if (!currentIndex) return;
  currentSectionIdx = idx;
  document.querySelectorAll('.section-item').forEach(it=>it.classList.remove('active'));
  const el = document.querySelector(`[data-section="${idx}"]`);
  if (el) el.classList.add('active');

  const sections = getAllSections(currentIndex);
  const section = sections[idx];
  if (!section) return;

  document.getElementById('pageTitle').textContent = section.title;
  document.getElementById('emptyState').style.display = 'none';
  const cd = document.getElementById('singleSectionContent');
  cd.style.display = 'block';
  document.body.classList.add('mobile-reading');

  if (section.type === 'ai') {
    renderAISection(section, cd);
  } else if (section.type === 'chart_candle') {
    renderCandleChartSection(currentIndex, cd);
  } else if (section.type === 'chart_line') {
    renderLineChartSection(currentIndex, cd);
  } else if (section.type === 'index_cards') {
    renderIndexCardsSection(cd);
  } else if (section.type === 'heatmap') {
    renderHeatmapSection(cd);
  }
}

// ---- Render AI Section ----
function renderAISection(section, container) {
  container.innerHTML = `
    <div class="section-card">
      <div class="section-header"><span>${section.icon}</span> ${escapeHtml(section.title)}</div>
      <div class="section-body">${section.content || '<p class="content-paragraph">Khong co noi dung.</p>'}</div>
    </div>
  `;
}

// ---- Render Candlestick Chart Section ----
function renderCandleChartSection(key, container) {
  const d = getOhlcvData(key);
  if (!d) { container.innerHTML = '<div class="section-card"><div class="section-body"><p>Khong co du lieu OHLCV</p></div></div>'; return; }
  const bars = d.bars;
  const last = bars[bars.length-1];
  const panelId = 'ohlcv_'+key+'_'+Date.now();

  container.innerHTML = `<div class="section-card">
    <div class="section-header"><span>\u{1F4CA}</span> BIEU DO NEN & KHOI LUONG - ${escapeHtml(d.name)}</div>
    <div class="section-body">
      <div class="ohlcv-panel" id="${panelId}">
        <div class="ohlcv-toolbar"><div class="title">${escapeHtml(d.name)} - Candlestick</div><div style="font-weight:900;font-size:.82rem;color:var(--text-secondary)">${bars.length} phien</div></div>
        <div class="ohlcv-body">
          <div class="ohlcv-chart" id="${panelId}_chart"></div>
          <div class="ohlcv-meta"><div>O:${fmtNum(last.o)} H:${fmtNum(last.h)} L:${fmtNum(last.l)} C:${fmtNum(last.c)}</div><div>Vol: ${fmtCompact(last.v)}</div></div>
        </div>
      </div>
    </div>
  </div>`;

  setTimeout(() => initCandleChart(panelId+'_chart', bars), 50);
}

// ---- Render Line Chart Section ----
function renderLineChartSection(key, container) {
  const d = getOhlcvData(key);
  if (!d) { container.innerHTML = '<div class="section-card"><div class="section-body"><p>Khong co du lieu</p></div></div>'; return; }
  const bars = d.bars;
  const last = bars[bars.length-1];
  const first = bars[0];
  const pct = first.c ? ((last.c-first.c)/first.c*100) : 0;
  const panelId = 'line_'+key+'_'+Date.now();

  // Calculate support/resistance
  const bars50 = bars.slice(-50);
  const support = Math.min(...bars50.map(b=>b.l));
  const resistance = Math.max(...bars50.map(b=>b.h));

  container.innerHTML = `<div class="section-card">
    <div class="section-header"><span>\u{1F4C8}</span> BIEU DO XU HUONG - ${escapeHtml(d.name)}</div>
    <div class="section-body">
      <div class="conclusion-box">
        <span class="conclusion-icon">\u{1F4C8}</span>
        <span class="conclusion-text">${escapeHtml(d.name)}: ${last.c>=first.c?'Tang':'Giam'} <span class="metric-number">${Math.abs(pct).toFixed(2)}%</span> trong ${bars.length} phien</span>
      </div>
      <div class="price-panel" id="${panelId}">
        <div class="price-toolbar"><div class="title">Close price + Support/Resistance</div></div>
        <div class="price-body">
          <div class="price-chart" id="${panelId}_chart" style="height:300px"></div>
        </div>
      </div>
      <div class="evidence-box" style="margin-top:14px">
        <span class="evidence-icon">\u{2705}</span>
        <span class="evidence-text">Ho tro: ${fmtNum(support,2)} | Khang cu: ${fmtNum(resistance,2)} | Gia hien tai: ${fmtNum(last.c,2)}</span>
      </div>
    </div>
  </div>`;

  setTimeout(() => initLineChartWithLevels(panelId+'_chart', bars, support, resistance), 50);
}

// ---- Render Index Cards Section ----
function renderIndexCardsSection(container) {
  const keys = INDEX_KEYS.filter(k=>k!=='overview');
  const cards = keys.map(k => {
    const d = getOhlcvData(k);
    if (!d || !d.bars.length) return '';
    const last = d.bars[d.bars.length-1];
    const pct = getChangePct(k);
    const tone = getTone(pct);
    const change = pct!=null?((pct>=0?'+':'')+pct.toFixed(2)+'%'):'N/A';
    return `<button type="button" class="idx-card-btn" onclick="selectIndex('${k}');selectSection(0);">
      <div class="idx-top">
        <div class="idx-code">${INDEX_NAMES[k]}</div>
        <div><span class="chip ${tone}">${change}</span></div>
      </div>
      <div style="margin-top:8px;font-weight:900;font-size:1.1rem">${fmtNum(last.c,2)}</div>
      <div style="margin-top:4px;color:var(--text-secondary);font-size:.82rem">Vol: ${fmtCompact(last.v)}</div>
    </button>`;
  }).join('');

  // Summary table
  let rows = '';
  keys.forEach(k => {
    const d = getOhlcvData(k);
    if (!d || !d.bars.length) return;
    const last = d.bars[d.bars.length-1];
    const pct = getChangePct(k);
    const tone = getTone(pct);
    const change = pct!=null?((pct>=0?'+':'')+pct.toFixed(2)+'%'):'N/A';
    rows += `<tr>
      <td style="font-weight:900">${escapeHtml(INDEX_NAMES[k])}</td>
      <td style="text-align:right">${fmtNum(last.c,2)}</td>
      <td style="text-align:right"><span class="chip ${tone}">${change}</span></td>
      <td style="text-align:right">${fmtCompact(last.v)}</td>
    </tr>`;
  });

  container.innerHTML = `<div class="section-card">
    <div class="section-header"><span>\u{1F4CA}</span> THONG KE CAC CHI SO</div>
    <div class="section-body">
      <div class="idx-cards" style="margin-bottom:20px">${cards}</div>
      <table class="summary-table">
        <thead><tr><th>Index</th><th style="text-align:right">Gia</th><th style="text-align:right">Thay doi</th><th style="text-align:right">Khoi luong</th></tr></thead>
        <tbody>${rows}</tbody>
      </table>
    </div>
  </div>`;
}

// ---- Render Heatmap Section ----
function renderHeatmapSection(container) {
  if (!HAS_HEATMAP) {
    container.innerHTML = '<div class="section-card"><div class="section-body"><p>Khong co du lieu heatmap. Chay v3_generator.py de tao du lieu.</p></div></div>';
    return;
  }

  const gainers = UI_GLM_VNINDEX_HEATMAP.gainers || [];
  const losers = UI_GLM_VNINDEX_HEATMAP.losers || [];

  const renderTable = (items, title) => {
    if (!items.length) return '<p>Khong co du lieu</p>';
    const cols = 6;
    const rows = Math.ceil(items.length/cols);
    let html = '';
    let k = 0;
    for (let r=0; r<rows; r++) {
      let row = '';
      for (let c=0; c<cols; c++) {
        if (k>=items.length) { row+='<td></td>'; continue; }
        const it = items[k++];
        const cs = it.change_pct>=0?'+':'';
        row += `<td class="heatmap-cell">
          <button class="heatmap-cell-btn" data-change-pct="${it.change_pct}" onclick="openStockPopup('${it.symbol}',${it.price},${it.change_pct},${it.volume})">
            <div class="heatmap-symbol">${it.symbol}</div>
            <div class="heatmap-metric">${cs}${it.change_pct.toFixed(2)}%</div>
          </button>
        </td>`;
      }
      html += `<tr>${row}</tr>`;
    }
    return `<div class="overview-extras"><div class="block">
      <div class="block-header">${escapeHtml(title)}</div>
      <div class="block-body"><table class="heatmap-table">${html}</table></div>
    </div></div>`;
  };

  container.innerHTML = `<div class="section-card">
    <div class="section-header"><span>\u{1F525}</span> HEATMAP VN30</div>
    <div class="section-body">
      ${renderTable(gainers, '\u{1F7E2} VN30 - TANG GIA')}
      <div style="height:16px"></div>
      ${renderTable(losers, '\u{1F534} VN30 - GIAM GIA')}
    </div>
  </div>`;
}

// ---- Stock Popup ----
function openStockPopup(sym, price, pct, vol) {
  const tone = getTone(pct);
  const change = (pct>=0?'+':'')+pct.toFixed(2)+'%';
  openUiModal({title: sym, subtitle: 'VN30 Stock',
    bodyHtml: `
      <div class="ui-metrics" style="margin-top:12px">
        <div class="ui-metric"><div class="k">Gia (x1000 VND)</div><div class="v">${fmtNum(price,2)}</div></div>
        <div class="ui-metric"><div class="k">Thay doi</div><div class="v"><span class="chip ${tone}">${change}</span></div></div>
        <div class="ui-metric"><div class="k">Khoi luong</div><div class="v">${fmtCompact(vol)}</div></div>
      </div>
    `
  });
}

// ============================================================
// LIGHTWEIGHT CHARTS
// ============================================================
function getChartOptions(el) {
  const dk = isDark();
  return {
    layout: {
      background: {type:'solid', color: dk?'rgba(2,6,23,0)':'rgba(255,255,255,0)'},
      textColor: dk?'rgba(226,232,240,0.85)':'rgba(15,23,42,0.75)',
      attributionLogo: false,
      fontFamily: '-apple-system, system-ui, Segoe UI, Roboto, Arial',
      fontSize: 12,
    },
    grid: {
      vertLines: {color: dk?'rgba(148,163,184,0.16)':'rgba(148,163,184,0.28)'},
      horzLines: {color: dk?'rgba(148,163,184,0.16)':'rgba(148,163,184,0.28)'},
    },
    rightPriceScale: {borderVisible:false},
    timeScale: {borderVisible:false, rightOffset:6, fixLeftEdge:true, fixRightEdge:true},
    crosshair: {mode: LightweightCharts.CrosshairMode.Magnet},
    handleScroll: {mouseWheel:true, pressedMouseMove:true, horzTouchDrag:true, vertTouchDrag:false},
    handleScale: {mouseWheel:true, pinch:true, axisPressedMouseMove:true},
    height: el.clientHeight||280,
    width: el.clientWidth||700,
  };
}

function initCandleChart(elId, bars) {
  const el = document.getElementById(elId);
  if (!el||typeof LightweightCharts==='undefined') return;
  const chart = LightweightCharts.createChart(el, getChartOptions(el));
  const dk = isDark();
  const upCol = cssVar('--chart-up','rgba(16,185,129,0.95)');
  const downCol = cssVar('--chart-down','rgba(239,68,68,0.95)');
  const wickCol = cssVar('--chart-wick', dk?'rgba(226,232,240,0.55)':'rgba(15,23,42,0.35)');

  const candle = chart.addCandlestickSeries({
    upColor:upCol, downColor:downCol,
    borderUpColor:upCol, borderDownColor:downCol,
    wickUpColor:wickCol, wickDownColor:wickCol,
  });
  candle.setData(bars.map(b=>({time:b.d, open:b.o, high:b.h, low:b.l, close:b.c})));

  const upSoft = cssVar('--chart-up-soft','rgba(16,185,129,0.45)');
  const downSoft = cssVar('--chart-down-soft','rgba(239,68,68,0.45)');
  const vol = chart.addHistogramSeries({
    priceFormat:{type:'volume'}, priceScaleId:'',
    scaleMargins:{top:0.78, bottom:0},
  });
  vol.setData(bars.map(b=>({time:b.d, value:b.v||0, color: b.c>=b.o?upSoft:downSoft})));
  chart.timeScale().fitContent();
  const ro = new ResizeObserver(()=>{
    try { chart.applyOptions({width:el.clientWidth,height:el.clientHeight}); chart.timeScale().fitContent(); } catch(_){}
  });
  ro.observe(el);
}

function initLineChartWithLevels(elId, bars, support, resistance) {
  const el = document.getElementById(elId);
  if (!el||typeof LightweightCharts==='undefined') return;
  const opts = getChartOptions(el);
  opts.height = el.clientHeight||300;
  const chart = LightweightCharts.createChart(el, opts);
  const dk = isDark();
  const line = chart.addLineSeries({
    color: dk?'rgba(96,165,250,0.95)':'rgba(59,130,246,0.95)',
    lineWidth: 2,
  });
  line.setData(bars.map(b=>({time:b.d, value:b.c})));

  try {
    if (support) line.createPriceLine({price:support, color:'rgba(16,185,129,0.92)', lineWidth:2, lineStyle:LightweightCharts.LineStyle.Dashed, axisLabelVisible:true, title:'Support'});
    if (resistance) line.createPriceLine({price:resistance, color:'rgba(239,68,68,0.92)', lineWidth:2, lineStyle:LightweightCharts.LineStyle.Dashed, axisLabelVisible:true, title:'Resistance'});
  } catch(_){}

  chart.timeScale().fitContent();
  const ro = new ResizeObserver(()=>{
    try { chart.applyOptions({width:el.clientWidth,height:el.clientHeight}); chart.timeScale().fitContent(); } catch(_){}
  });
  ro.observe(el);
}

// ============================================================
// BOOT
// ============================================================
function boot() {
  if (!HAS_DATA) {
    document.getElementById('emptyState').innerHTML = `
      <div style="font-size:4rem;margin-bottom:20px;">\u{26A0}\u{FE0F}</div>
      <h2 style="color:var(--text-secondary);margin-bottom:10px;">Chua co du lieu</h2>
      <p style="color:var(--text-secondary);font-size:.9rem;">
        Chay <code>python src/v3_generator.py</code> de tao du lieu.<br>
        File <code>docs/v3_data.js</code> se duoc tao tu dong.
      </p>
    `;
    return;
  }

  // Set meta
  if (HAS_META) {
    document.getElementById('reportDate').textContent = UI_GLM_REPORT_META.human_date || '';
    document.getElementById('lastUpdate').textContent = UI_GLM_REPORT_META.human_updated_at || '';
  }

  // Render sidebar
  renderSidebar();

  // Auto-select overview
  selectIndex('overview');
  selectSection(0);
}

boot();
</script>
</body>
</html>
